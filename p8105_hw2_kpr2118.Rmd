---
title: "Homework 2"
author: Kailey Rishovd
date: 9/30/2020
output: github_document
---

```{r setup}
library(tidyverse)
library(readxl)
```

## Problem 1

Define a path to the dataset. 

```{r}
path_to_trash_data = "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx"
```

Read the Mr. Trashwheel dataset. 

```{r}
trashwheel_df = 
  read_xlsx(
    path = path_to_trash_data,
    sheet = "Mr. Trash Wheel",
    range = cell_cols("A:N")) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(
    sports_balls = round(sports_balls), 
    sports_balls = as.integer(sports_balls)
  )
```

Read precipitation data for 2018 and 2017! 

```{r}
precip_2018 = 
  read_excel(
    "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
  sheet = "2018 Precipitation",
  skip = 1 
  ) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2018) %>% 
  relocate(year)

precip_2017 = 
  read_excel(
    "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
  sheet = "2017 Precipitation",
  skip = 1 
  ) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2017) %>% 
  relocate(year)
```

Now combine annual precipitation. Made 'helper' tibble for numeric and character representation of month, then merge with month number key, with the precipitation dataset. 

```{r}
month_df = 
  tibble(
    month = 1:12, 
    month_name = month.name
  )

precip_df = 
  bind_rows(precip_2018, precip_2017)

precip_df = 
  left_join(precip_df, month_df, by = "month") 
```

This dataset contains information from the Mr. Trashwheel trash collector in Baltimore, Maryland. As trash enters the inner harbor, the trashwheel collects that trash, and stores it in a dumpster. The dataset contains information on year, month, and trash collected, including some specific kinds of trash.There are a total of `r nrow(trashwheel_df)` rows in our final dataset. Additional data sheets include monthly precipitation data. In this dataset: 

- The total precipitation in 2018 was `r sum(pull(precip_2018, total))` inches.

- The median number of sports balls found in a dumpster in 2017 was `r median(pull(trashwheel_df, sports_balls))`. 

## Problem 2

Read the NYC Transit dataset and begin to clean. 

```{r}
transit_df = 
  read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  select(line:entry, vending, ada) %>% 
  mutate(entry = recode(entry, YES = "TRUE", NO = "FALSE")) 
```

This dataset contains information from the NYC Transit Subway Entrance and Exit data. It has information on each line including stations, station locations, routes served, entrance type, entrance availability, vending availability, and ada compliance. There are a total of `r nrow(transit_df)` rows and `r ncol(transit_df)` columns in this dataset. So far, I have cleaned up names, selected variables of interest, and converted the 'entry' variable from character into a logical variable. The data are relatively tidy but there could be more done to make it even more so... possibilities include organizing the arrangement of information or making some variables more distinct. In this dataset: 

- There are `r filter(transit_df) %>% select (line, station_name) %>%  distinct(line, station_name) %>% nrow()` distinct stations. 

- `r filter(transit_df, ada == "TRUE") %>% select (line, station_name, ada) %>% distinct (line, station_name) %>% nrow()` stations are ADA compliant. 

- `r filter(transit_df, vending == "NO", entry == "TRUE") %>% select (line, station_name, vending, entry) %>% distinct (line, station_name) %>% nrow()` station entrances/exits without vending allow entrance 

Now I will reformat route number and route name into distinct variables. 

```{r}
transit_df = 
  transit_df %>% 
  mutate_at(vars(route1:route11), as.character) %>% 
  pivot_longer(
    route1:route11, 
    names_to = "route_number",
    names_prefix = "route",
    values_to = "route_name",
  ) %>% 
  drop_na(route_name) %>% 
  relocate(line:station_longitude, route_name, route_number, entrance_type:ada)
```










